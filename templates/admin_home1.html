{% extends "index.html" %}
{% block content %}

<h2>Admin Console</h2>
<div class="grid">
  <div class="card">
    <h3>Status</h3>
    <ul id="status-list">
      <li>Prometheus: <strong id="prom-status">checking…</strong></li>
      <li>Grafana: <strong id="graf-status">checking…</strong></li>
    </ul>
    <button id="btn-provision" class="btn btn-primary">Provision Datasource, Folder & Dashboard</button>
    <p class="muted">Uses Grafana HTTP API with your service account token.</p>
    <pre id="provision-result" class="codeblock" style="display:none;"></pre>
  </div> 

  <div class="card">
  <h3>Actions</h3>
  <button onclick="provisionDashboard()">Provision Dashboard</button>
  <button onclick="updateAlerts({cpu: 80, memory: 80, disk: 80})">Update Alerts</button>
  </div>

  <div class="card">
    <h3>Manage</h3>
    <a class="btn" href="{{ url_for('manage_users') }}">Users</a>
    <a class="btn" href="{{ url_for('edit_dashboard') }}">Edit Dashboard JSON</a>
    <a class="btn" href="{{ url_for('alert_settings') }}">Alert Thresholds (form)</a>
    <a class="btn" id="btn-graf-info">Grafana Info (JSON)</a>
    <pre id="graf-info" class="codeblock" style="display:none;"></pre>
  </div>

  <div class="card">
    <h3>Quick Thresholds (AJAX)</h3>
    <div class="grid">
      <div><label>CPU %</label><input id="cpu" class="input" type="number" min="10" max="100" value="80"></div>
      <div><label>Memory %</label><input id="memory" class="input" type="number" min="10" max="100" value="80"></div>
      <div><label>Disk %</label><input id="disk" class="input" type="number" min="10" max="100" value="80"></div>
    </div>
    <button id="btn-alert-save-ajax" class="btn btn-primary">Save & Reload</button>
    <pre id="ajax-alert-out" class="codeblock" style="display:none;"></pre>
  </div>
</div>
{% endblock %}
